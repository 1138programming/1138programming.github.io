<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="<h1 id="swerve">Swerve</h1>
">
  
  <meta name="author" content="Team 1138">
  

  <link rel="shortcut icon" href="http://localhost:4000/assets/img/favicon.ico">

  <title>Swerve - Team 1138 Wiki</title>

  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />
  <link rel="stylesheet" href="http://localhost:4000/assets/css/theme.css" />
  <link rel="stylesheet" href="http://localhost:4000/assets/css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atelier-cave-dark.min.css" />
</head>

<body class="wy-body-for-nav" role="document" id="pageBody">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" id="navbar" class="wy-nav-side stickynav">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="http://localhost:4000" class="icon icon-home"> Team 1138 Wiki</a>
          <div role="search">
    <form id ="rtd-search-form" class="wy-form" action="/search.html" method="get">
      <input type="text" name="q" id="search-query" placeholder="Search docs" title="Type search term here" />
    </form>
  </div>
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
                <ul>
                    <li class="toctree-l1">
                        <a class="reference internal" href="http://localhost:4000/">Welcome!</a>
                    </li>
                </ul>
    <p class="caption"><span class="caption-text">design</span></p>
                <ul>
                    <li class="toctree-l1">
                        <a class="reference internal" href="http://localhost:4000/design/launchers.html">Launchers</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1">
                        <a class="reference internal" href="http://localhost:4000/design/Base.html">Bases</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1">
                        <a class="reference internal" href="http://localhost:4000/design/Structure.html">Structure</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1">
                        <a class="reference internal" href="http://localhost:4000/design/IndexersandStorages.html">Indexers and Storages</a>
                    </li>
                </ul>
    <p class="caption"><span class="caption-text">misc</span></p>
                <ul>
                    <li class="toctree-l1">
                        <a class="reference internal" href="http://localhost:4000/misc/howto.html">How to write an article</a>
                    </li>
                </ul>
    <p class="caption"><span class="caption-text">programming</span></p>
                <ul>
                    <li class="toctree-l1">
                        <a class="reference internal" href="http://localhost:4000/programming/Java_Resources.html">Java Resources</a>
                    </li>
                </ul><ul>
  <li class="toctree-l1 current"><a href="#swerve">Swerve</a>
    <ul>
      <li class="toctree-l2"><a href="#creating-the-objects">Creating the Objects</a></li>
      <li class="toctree-l2"><a href="#writing-the-main-class">Writing the main class</a></li>
      <li class="toctree-l2"><a href="#setting-desired-module-states">Setting Desired Module States</a></li>
    </ul>
  </li>
</ul>

                <ul>
                    <li class="toctree-l1">
                        <a class="reference internal" href="http://localhost:4000/programming/bluetooth.html">Bluetooth</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1">
                        <a class="reference internal" href="http://localhost:4000/programming/github_and_version_control.html">Github and Version Control</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1">
                        <a class="reference internal" href="http://localhost:4000/programming/WPILIB_install.html">Install WPILIB (for personal computers)</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1">
                        <a class="reference internal" href="http://localhost:4000/programming/Neccessary_Software.html">Neccessary Software</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1">
                        <a class="reference internal" href="http://localhost:4000/programming/How_to_use_Phoenix_Tuner.html">How to use Phoenix Tuner</a>
                    </li>
                </ul>
    <p class="caption"><span class="caption-text">shapeoko</span></p>
                <ul>
                    <li class="toctree-l1">
                        <a class="reference internal" href="http://localhost:4000/shapeoko/carbide-create.html">Shapeoko Basics: Carbide Create</a>
                    </li>
                </ul>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap" id="mobilePageBody">
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="http://localhost:4000">Team 1138 Wiki</a>
      </nav>
      <div class="wy-nav-content" id="pageContentDiv">
        <div class="rst-content" id="breadcrumbDiv">
          <div role="navigation" aria-label="breadcrumbs navigation">
    <ul class="wy-breadcrumbs">
          <li><a href="http://localhost:4000">Docs</a>&raquo;</li>
          <li>Swerve</li>
      <li class="author-name">
         By: Will Seguin </p> 
      </li>
      <li class="wy-breadcrumbs-aside">
      </li>
    </ul>
    <hr>
  </div>
          <div role="main">
            <div class="section" id="compiledMarkdownDiv">
              <h1 id="swerve">Swerve</h1>

<p>In this guide, we will walk through the first steps for creating a usable swerve drive. The first of these steps is to create a subsystem to store swerve modules. </p>

<h2 id="creating-the-objects">Creating the Objects</h2>

<p>The first step in making the Swerve module class is to create all of the objects that you will need:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="nc">CANSparkMax</span> <span class="n">angleMotor</span><span class="o">;</span>
<span class="kd">private</span> <span class="nc">CANSparkFlex</span> <span class="n">driveMotor</span><span class="o">;</span>

<span class="kd">private</span> <span class="nc">CANcoder</span> <span class="n">canCoder</span><span class="o">;</span>
<span class="kd">private</span> <span class="nc">RelativeEncoder</span> <span class="n">driveEncoder</span><span class="o">;</span>

<span class="kd">private</span> <span class="nc">PIDController</span> <span class="n">angleController</span><span class="o">;</span>
<span class="kd">private</span> <span class="nc">SparkPIDController</span> <span class="n">drivingPidController</span><span class="o">;</span>

<span class="kd">private</span> <span class="nc">SwerveModulePosition</span> <span class="n">prevPosition</span><span class="o">;</span>

<span class="kd">private</span> <span class="kt">double</span> <span class="n">offset</span><span class="o">;</span>
</code></pre></div></div>

<p>The first two objects are the Drive motors. The type of motor object that we use will depend on the type of motor mounted on the robot. For any further info consult <a href="https://app.nuclino.com/t/b/7572f3be-36ea-489a-a519-7fad9a04e690?n">Motor Controllers</a>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="nc">CANSparkMax</span> <span class="n">angleMotor</span><span class="o">;</span>
<span class="kd">private</span> <span class="nc">CANSparkFlex</span> <span class="n">driveMotor</span><span class="o">;</span>
</code></pre></div></div>

<p>The second two objects are the encoders that we use for controlling the motors. The first is the rotation CanCoder mounted on the top of the module and gives us data on the the rotation of the wheel. The second is the drive motor encoder which tells us the relative speed of the drive motor. For any more questions consult <a href="https://app.nuclino.com/t/b/606da02b-0873-4549-8fab-55ee90987463?n">Encoders</a>. </p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="nc">CANcoder</span> <span class="n">canCoder</span><span class="o">;</span>
<span class="kd">private</span> <span class="nc">RelativeEncoder</span> <span class="n">driveEncoder</span><span class="o">;</span>
</code></pre></div></div>

<p>The third two objects are the PID controllers. These are used to more accurately control the rotation and drive functions of the module. For any questions consult <a href="https://app.nuclino.com/t/b/49a5bdf9-ae8a-4db4-8fe3-8b7a326ea4f5?n">How to PID</a>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="nc">PIDController</span> <span class="n">angleController</span><span class="o">;</span>
<span class="kd">private</span> <span class="nc">SparkPIDController</span> <span class="n">drivingPidController</span><span class="o">;</span>
</code></pre></div></div>

<p> Fourth, we use a object called a Swerve module position. This records the angle and relative speed of the module as a module state. </p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="nc">SwerveModulePosition</span> <span class="n">prevPosition</span><span class="o">;</span>
</code></pre></div></div>

<p>Finally, we set an offset on the rotation motor to make sure it points forward. </p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="kt">double</span> <span class="n">offset</span><span class="o">;</span>
</code></pre></div></div>

<h2 id="writing-the-main-class">Writing the main class</h2>

<p>This second step is to write the actual class for the swerve module. </p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="nf">SwerveModule</span><span class="o">(</span><span class="kt">int</span> <span class="n">angleMotorID</span><span class="o">,</span> <span class="kt">int</span> <span class="n">driveMotorID</span><span class="o">,</span> <span class="kt">int</span> <span class="n">encoderPort</span><span class="o">,</span> <span class="kt">double</span> <span class="n">offset</span><span class="o">,</span> 
                      <span class="kt">boolean</span> <span class="n">driveMotorReversed</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">angleMotorReversed</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">angleMotor</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CANSparkMax</span><span class="o">(</span><span class="n">angleMotorID</span><span class="o">,</span> <span class="nc">MotorType</span><span class="o">.</span><span class="na">kBrushless</span><span class="o">);</span>
    <span class="n">driveMotor</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CANSparkFlex</span><span class="o">(</span><span class="n">driveMotorID</span><span class="o">,</span> <span class="nc">MotorType</span><span class="o">.</span><span class="na">kBrushless</span><span class="o">);</span>
    
    <span class="n">angleMotor</span><span class="o">.</span><span class="na">setIdleMode</span><span class="o">(</span><span class="nc">IdleMode</span><span class="o">.</span><span class="na">kBrake</span><span class="o">);</span>
    <span class="n">driveMotor</span><span class="o">.</span><span class="na">setIdleMode</span><span class="o">(</span><span class="nc">IdleMode</span><span class="o">.</span><span class="na">kBrake</span><span class="o">);</span>
    
    <span class="k">this</span><span class="o">.</span><span class="na">angleMotor</span><span class="o">.</span><span class="na">setInverted</span><span class="o">(</span><span class="n">angleMotorReversed</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">driveMotor</span><span class="o">.</span><span class="na">setInverted</span><span class="o">(</span><span class="n">driveMotorReversed</span><span class="o">);</span>
    
    <span class="k">this</span><span class="o">.</span><span class="na">driveMotor</span><span class="o">.</span><span class="na">setSmartCurrentLimit</span><span class="o">(</span><span class="nc">KDriveMotorCurrentLimit</span><span class="o">);</span> <span class="c1">// CURRENTLY 85! NEEDS TESTING</span>
    <span class="k">this</span><span class="o">.</span><span class="na">angleMotor</span><span class="o">.</span><span class="na">setSmartCurrentLimit</span><span class="o">(</span><span class="nc">KAngleMotorCurrentLimit</span><span class="o">);</span> <span class="c1">// 40</span>

    <span class="n">canCoder</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CANcoder</span><span class="o">(</span><span class="n">encoderPort</span><span class="o">);</span>

    <span class="nc">MagnetSensorConfigs</span> <span class="n">canCoderConfig</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MagnetSensorConfigs</span><span class="o">();</span>

    <span class="kt">double</span> <span class="n">offsetToRotations</span> <span class="o">=</span> <span class="n">offset</span><span class="o">/</span><span class="mi">360</span><span class="o">;</span>

    <span class="n">canCoderConfig</span><span class="o">.</span><span class="na">AbsoluteSensorRange</span> <span class="o">=</span> <span class="nc">AbsoluteSensorRangeValue</span><span class="o">.</span><span class="na">Signed_PlusMinusHalf</span><span class="o">;</span>
    <span class="n">canCoderConfig</span><span class="o">.</span><span class="na">SensorDirection</span> <span class="o">=</span> <span class="nc">SensorDirectionValue</span><span class="o">.</span><span class="na">CounterClockwise_Positive</span><span class="o">;</span>
    <span class="n">canCoderConfig</span><span class="o">.</span><span class="na">MagnetOffset</span> <span class="o">=</span> <span class="n">offsetToRotations</span><span class="o">;</span>
    <span class="n">canCoder</span><span class="o">.</span><span class="na">getConfigurator</span><span class="o">().</span><span class="na">apply</span><span class="o">(</span><span class="n">canCoderConfig</span><span class="o">);</span>

    <span class="c1">// driveEncoder = driveMotor.getExternalEncoder(Type.kQuadrature, 1);</span>
    <span class="n">driveEncoder</span> <span class="o">=</span> <span class="n">driveMotor</span><span class="o">.</span><span class="na">getEncoder</span><span class="o">();</span>
    
    <span class="n">driveEncoder</span><span class="o">.</span><span class="na">setPositionConversionFactor</span><span class="o">(</span><span class="nc">KDriveMotorRotToMeter</span><span class="o">);</span>
    <span class="n">driveEncoder</span><span class="o">.</span><span class="na">setVelocityConversionFactor</span><span class="o">(</span><span class="nc">KDriveMotorRPMToMetersPerSec</span><span class="o">);</span>

    
    <span class="n">angleController</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PIDController</span><span class="o">(</span><span class="nc">KAngleP</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="nc">KAngleD</span><span class="o">);</span>
    <span class="n">angleController</span><span class="o">.</span><span class="na">enableContinuousInput</span><span class="o">(-</span><span class="mi">180</span><span class="o">,</span> <span class="mi">180</span><span class="o">);</span> 
      <span class="c1">// Tells PIDController that 180 deg is same in both directions</span>

    <span class="n">drivingPidController</span> <span class="o">=</span> <span class="n">driveMotor</span><span class="o">.</span><span class="na">getPIDController</span><span class="o">();</span>
    <span class="n">drivingPidController</span><span class="o">.</span><span class="na">setP</span><span class="o">(</span><span class="nc">KDrivingPidP</span><span class="o">);</span>
    <span class="n">drivingPidController</span><span class="o">.</span><span class="na">setI</span><span class="o">(</span><span class="nc">KDrivingPidI</span><span class="o">);</span>
    <span class="n">drivingPidController</span><span class="o">.</span><span class="na">setD</span><span class="o">(</span><span class="nc">KDrivingPidD</span><span class="o">);</span>
    <span class="n">drivingPidController</span><span class="o">.</span><span class="na">setFF</span><span class="o">(</span><span class="mi">1</span><span class="o">/</span><span class="nc">KNeoVortexMaxRPM</span><span class="o">);</span>
    <span class="n">drivingPidController</span><span class="o">.</span><span class="na">setOutputRange</span><span class="o">(-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
  <span class="o">}</span>
</code></pre></div></div>

<p>The first step of this is to set up the motor controllers. This has three steps, setting the motor controller to new motor controller objects, telling the motors whether they should be inverted or not, and finally setting the motors current limit. </p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">angleMotor</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CANSparkMax</span><span class="o">(</span><span class="n">angleMotorID</span><span class="o">,</span> <span class="nc">MotorType</span><span class="o">.</span><span class="na">kBrushless</span><span class="o">);</span>
    <span class="n">driveMotor</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CANSparkFlex</span><span class="o">(</span><span class="n">driveMotorID</span><span class="o">,</span> <span class="nc">MotorType</span><span class="o">.</span><span class="na">kBrushless</span><span class="o">);</span>
    
    <span class="n">angleMotor</span><span class="o">.</span><span class="na">setIdleMode</span><span class="o">(</span><span class="nc">IdleMode</span><span class="o">.</span><span class="na">kBrake</span><span class="o">);</span>
    <span class="n">driveMotor</span><span class="o">.</span><span class="na">setIdleMode</span><span class="o">(</span><span class="nc">IdleMode</span><span class="o">.</span><span class="na">kBrake</span><span class="o">);</span>
    
    <span class="k">this</span><span class="o">.</span><span class="na">angleMotor</span><span class="o">.</span><span class="na">setInverted</span><span class="o">(</span><span class="n">angleMotorReversed</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">driveMotor</span><span class="o">.</span><span class="na">setInverted</span><span class="o">(</span><span class="n">driveMotorReversed</span><span class="o">);</span>
    
    <span class="k">this</span><span class="o">.</span><span class="na">driveMotor</span><span class="o">.</span><span class="na">setSmartCurrentLimit</span><span class="o">(</span><span class="nc">KDriveMotorCurrentLimit</span><span class="o">);</span> 
    <span class="k">this</span><span class="o">.</span><span class="na">angleMotor</span><span class="o">.</span><span class="na">setSmartCurrentLimit</span><span class="o">(</span><span class="nc">KAngleMotorCurrentLimit</span><span class="o">);</span>
</code></pre></div></div>

<p>The second step is to set up for the CanCoder. The CanCoder is setup by creating a CanCoder Configuration object and applying it to the CanCoder. In order to create a config object, you need to tell the object its sensor range, sensor direction, and offset(in rotations). </p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">canCoder</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CANcoder</span><span class="o">(</span><span class="n">encoderPort</span><span class="o">);</span>

    <span class="nc">MagnetSensorConfigs</span> <span class="n">canCoderConfig</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MagnetSensorConfigs</span><span class="o">();</span>

    <span class="kt">double</span> <span class="n">offsetToRotations</span> <span class="o">=</span> <span class="n">offset</span><span class="o">/</span><span class="mi">360</span><span class="o">;</span>

    <span class="n">canCoderConfig</span><span class="o">.</span><span class="na">AbsoluteSensorRange</span> <span class="o">=</span> <span class="nc">AbsoluteSensorRangeValue</span><span class="o">.</span><span class="na">Signed_PlusMinusHalf</span><span class="o">;</span>
    <span class="n">canCoderConfig</span><span class="o">.</span><span class="na">SensorDirection</span> <span class="o">=</span> <span class="nc">SensorDirectionValue</span><span class="o">.</span><span class="na">CounterClockwise_Positive</span><span class="o">;</span>
    <span class="n">canCoderConfig</span><span class="o">.</span><span class="na">MagnetOffset</span> <span class="o">=</span> <span class="n">offsetToRotations</span><span class="o">;</span>
    <span class="n">canCoder</span><span class="o">.</span><span class="na">getConfigurator</span><span class="o">().</span><span class="na">apply</span><span class="o">(</span><span class="n">canCoderConfig</span><span class="o">);</span>
</code></pre></div></div>

<p>The third step is to set up the internal encoder in the drive motor. We also set the motor so it returns data in meters and meters per second. </p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">driveEncoder</span> <span class="o">=</span> <span class="n">driveMotor</span><span class="o">.</span><span class="na">getEncoder</span><span class="o">();</span>
    
    <span class="n">driveEncoder</span><span class="o">.</span><span class="na">setPositionConversionFactor</span><span class="o">(</span><span class="nc">KDriveMotorRotToMeter</span><span class="o">);</span>
    <span class="n">driveEncoder</span><span class="o">.</span><span class="na">setVelocityConversionFactor</span><span class="o">(</span><span class="nc">KDriveMotorRPMToMetersPerSec</span><span class="o">);</span>
</code></pre></div></div>

<p>Finally we create and set the PID controllers.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">angleController</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PIDController</span><span class="o">(</span><span class="nc">KAngleP</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="nc">KAngleD</span><span class="o">);</span>
    <span class="n">angleController</span><span class="o">.</span><span class="na">enableContinuousInput</span><span class="o">(-</span><span class="mi">180</span><span class="o">,</span> <span class="mi">180</span><span class="o">);</span> 
      <span class="c1">// Tells PIDController that 180 deg is same in both directions</span>

    <span class="n">drivingPidController</span> <span class="o">=</span> <span class="n">driveMotor</span><span class="o">.</span><span class="na">getPIDController</span><span class="o">();</span>
    <span class="n">drivingPidController</span><span class="o">.</span><span class="na">setP</span><span class="o">(</span><span class="nc">KDrivingPidP</span><span class="o">);</span>
    <span class="n">drivingPidController</span><span class="o">.</span><span class="na">setI</span><span class="o">(</span><span class="nc">KDrivingPidI</span><span class="o">);</span>
    <span class="n">drivingPidController</span><span class="o">.</span><span class="na">setD</span><span class="o">(</span><span class="nc">KDrivingPidD</span><span class="o">);</span>
    <span class="n">drivingPidController</span><span class="o">.</span><span class="na">setFF</span><span class="o">(</span><span class="mi">1</span><span class="o">/</span><span class="nc">KNeoVortexMaxRPM</span><span class="o">);</span>
    <span class="n">drivingPidController</span><span class="o">.</span><span class="na">setOutputRange</span><span class="o">(-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
</code></pre></div></div>

<p><br /></p>

<h2 id="setting-desired-module-states">Setting Desired Module States</h2>

<p>Finally, we need to actually create a function to set tahe module states. This is done using the following functions. </p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setDesiredState</span><span class="o">(</span><span class="nc">SwerveModuleState</span> <span class="n">desiredState</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">double</span> <span class="n">angleMotorOutput</span><span class="o">;</span>
    <span class="kt">double</span> <span class="n">driveMotorOutput</span><span class="o">;</span>
    
    <span class="nc">Rotation2d</span> <span class="n">currentAngleR2D</span> <span class="o">=</span> <span class="n">getAngleR2D</span><span class="o">();</span>
    <span class="n">desiredState</span> <span class="o">=</span> <span class="nc">SwerveModuleState</span><span class="o">.</span><span class="na">optimize</span><span class="o">(</span><span class="n">desiredState</span><span class="o">,</span> <span class="n">currentAngleR2D</span><span class="o">);</span>
    <span class="n">angleMotorOutput</span> <span class="o">=</span> <span class="n">angleController</span><span class="o">.</span><span class="na">calculate</span><span class="o">(</span><span class="n">getAngleDeg</span><span class="o">(),</span> <span class="n">desiredState</span><span class="o">.</span><span class="na">angle</span><span class="o">.</span><span class="na">getDegrees</span><span class="o">());</span>
    
    <span class="n">driveMotorOutput</span> <span class="o">=</span> <span class="n">desiredState</span><span class="o">.</span><span class="na">speedMetersPerSecond</span> <span class="o">/</span> <span class="nc">KPhysicalMaxDriveSpeedMPS</span><span class="o">;</span>
    <span class="c1">// driveMotorOutput = desiredState.speedMetersPerSecond;</span>
    <span class="c1">// driveMotorOutput = driveController.calculate(getDriveEncoderVel(), desiredState.speedMetersPerSecond) / KPhysicalMaxDriveSpeedMPS;</span>
    
    <span class="n">angleMotor</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">angleMotorOutput</span><span class="o">);</span>
    <span class="n">driveMotor</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">driveMotorOutput</span><span class="o">);</span> 
  <span class="o">}</span>

</code></pre></div></div>

<p><br /></p>

            </div>
          </div>
          <br>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="http://localhost:4000/programming/bluetooth.html" class="btn btn-neutral float-right" title="Bluetooth">Next <span class="icon icon-circle-arrow-right"></span></a>
        <a href="http://localhost:4000/programming/Java_Resources.html" class="btn btn-neutral" title="Java Resources"><span class="icon icon-circle-arrow-left"></span> Previous</a>
    </div>

    <hr/>

    <div role="contentinfo">
      <p>
          © Copyright 2025 Team 1138.
      </p>
    </div>
    Built with
    <a href="https://jekyllrb.com" target="_blank">Jekyll</a>
    using a <a href="https://github.com/carlosperate/jekyll-theme-rtd" target="_blank">theme</a>
    based on <a href="https://sphinx-rtd-theme.readthedocs.io" target="_blank">Read the Docs</a>.
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <a href="https://github.com/1138programming/1138programming.github.io" class="fa fa-github" target="_blank" style="float: left; color: #fcfcfc"> GitHub</a>
        <span><a href="http://localhost:4000/programming/Java_Resources.html" style="color: #fcfcfc;">&laquo; Previous</a></span>
        <span style="margin-left: 15px"><a href="http://localhost:4000/programming/bluetooth.html" style="color: #fcfcfc">Next &raquo;</a></span>
    </span>
</div>


  <!--Default scripts-->
  <script>var base_url = '';</script>
  <script src="http://localhost:4000/assets/js/jquery-2.1.1.min.js" defer></script>
  <script src="http://localhost:4000/assets/js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script src="http://localhost:4000/assets/js/theme.js" defer></script>
  <script type="text/javascript" defer>
    hljs.initHighlightingOnLoad();
    window.addEventListener('load', function() {
      SphinxRtdTheme.Navigation.enable(false);
    });
  </script>
  <!-- Build Date: 2025-07-09 17:36 -->

  <!--Our scripts-->
  <script src="../js/customMarkdown.js" defer id="customMarkdownJsFileID" expiremental-enabled="false"></script>
</body>
</html>